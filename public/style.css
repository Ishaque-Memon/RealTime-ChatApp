:root{
    --bg: #0f1724;
    --panel: #0b1220;
    --muted: #9aa4b2;
    --accent: #1fb6ff;
    --success: #3fc37a;
    --danger: #ff6b6b;
    --glass: rgba(255,255,255,0.03);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    background: radial-gradient(800px 400px at 10% 10%, rgba(31,182,255,0.06), transparent 6%), linear-gradient(180deg,#07101a 0%, #061523 100%);
    display:flex;align-items:center;justify-content:center;padding:20px;color:#e6eef6;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

.chat__section{
    width:100%;max-width:1100px;height:86vh;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;padding:18px;display:flex;flex-direction:column;box-shadow:0 10px 30px rgba(2,6,23,0.6);
    gap:12px;backdrop-filter: blur(6px);
}

.chat__header{display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px}
.brand i{font-size:1.6rem;color:var(--accent)}
.brand h1{margin:0;font-size:1.2rem;letter-spacing:0.6px}

.header__controls{display:flex;gap:8px;align-items:center}
.btn{border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
.btn i{margin-right:6px}
.btn-ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:10px}
.btn-primary{background:var(--accent);color:#fff}
.btn-secondary{background:#0f2540;color:#dff5ff}
.btn-danger{background:var(--danger);color:#fff}

.message_area{flex:1;overflow:auto;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02))}
.messages{display:flex;flex-direction:column;gap:12px}
.message{max-width:78%;border-radius:12px}
.message.me{align-self:flex-end;color:#fff}
.message.other{align-self:flex-start;color:#e6eef6}
.message .meta{display:flex;gap:8px;align-items:center;font-size:0.8rem;color:var(--muted);margin:0 0 6px 0}

/* The bubble is the visible message box; width is calculated dynamically in JS */
.bubble{display:inline-block;padding:12px;border-radius:12px;box-shadow:0 4px 12px rgba(2,6,23,0.32);word-break:break-word;white-space:pre-wrap}
.message.me .bubble{background:linear-gradient(180deg, #083c6b, #06527f);color:#fff;border-bottom-right-radius:6px}
.message.other .bubble{background:linear-gradient(180deg, #0f1b2a, #0b2538);color:#e6eef6;border-bottom-left-radius:6px}

.message p{margin:0;line-height:1.35}

.input_area{display:flex;gap:10px;align-items:center;padding:8px}
#message_Area{flex:1;padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;resize:none;min-height:44px}
.send_btn{width:48px;height:48px;border-radius:12px;background:var(--accent);color:#fff;border:0;display:grid;place-items:center}

/* modal */
.modal{position:fixed;inset:0;display:grid;place-items:center;background:linear-gradient(rgba(2,6,23,0.6), rgba(2,6,23,0.6));z-index:60}
.modal.hidden{display:none}
.modal__content{background:var(--panel);padding:18px;border-radius:12px;min-width:320px;max-width:420px;color:#e6eef6;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
.modal__content h3{margin:0 0 10px 0}
.modal__content input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);margin-bottom:12px;background:transparent;color:inherit}
.modal__actions{display:flex;gap:8px;justify-content:flex-end}

/* Spinner used in buttons */
.spinner{display:inline-block;width:16px;height:16px;border-radius:50%;border:2px solid rgba(255,255,255,0.12);border-top-color:var(--accent);transform:translateY(1px);opacity:0;transition:opacity .12s linear}
.btn.loading .spinner{opacity:1;animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Toasts */
.toasts{position:fixed;right:18px;bottom:18px;display:flex;flex-direction:column;gap:8px;z-index:80}
.toast{min-width:220px;background:rgba(0,0,0,0.45);color:#fff;padding:10px 12px;border-radius:10px;backdrop-filter:blur(4px);box-shadow:0 6px 20px rgba(2,6,23,0.5);display:flex;justify-content:space-between;align-items:center;gap:10px}
.toast.success{border-left:4px solid var(--success)}
.toast.warn{border-left:4px solid #ffb020}
.toast.error{border-left:4px solid var(--danger)}

/* small screens */
@media (max-width:720px){
    .chat__section{height:100vh;border-radius:0;padding:12px}
    .message{max-width:92%}
    .header__controls{gap:6px}
}

/* Join form specific */
.join-card{width:100%;display:flex;flex-direction:column;gap:12px;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 6px 20px rgba(2,6,23,0.35)}
.join-card input{padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:1rem}
.fade-in{animation:fadeIn .36s ease-out both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* Join page layout */
.join-page{display:grid;grid-template-columns:1fr 420px;gap:28px;min-height:80vh;padding:36px;align-items:center}
.join-hero{padding:28px}
.join-hero .brand{display:flex;flex-direction:column;gap:8px}
.join-hero .brand i{font-size:2.6rem;color:var(--accent)}
.muted{color:var(--muted)}
.hero-illus{height:220px;background:linear-gradient(135deg, rgba(74,144,226,0.12), rgba(63,195,122,0.08));border-radius:14px}
.join-card h2{margin:0;font-size:1.2rem}
.join-card .small{font-size:0.85rem}

.avatar-preview{width:80px;height:80px;border-radius:16px;background:linear-gradient(135deg,#063a66,#0271a6);display:grid;place-items:center;color:#fff;font-weight:800;font-size:1.25rem;box-shadow:0 18px 40px rgba(3,12,28,0.55)}

.form-row{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:8px}
.form-row .controls{display:flex;gap:8px}
.form-row .actions{display:flex;gap:8px}
.error{color:var(--danger);min-height:20px}

.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Button tweaks */
.btn{transition:all .16s ease}
.btn:disabled{opacity:0.45;cursor:not-allowed}

@media (max-width:980px){ .join-page{grid-template-columns:1fr;min-height:unset;padding:20px} .hero-illus{display:none} }

/* Polished join card look */
.join-card{max-width:620px;margin:0 auto;padding:36px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 30px 80px rgba(2,6,23,0.7)}
.join-card input#joinName{width:100%;padding:16px 18px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));color:inherit;font-size:1.05rem;outline:none;transition:box-shadow .16s, border-color .12s}
.join-card input#joinName::placeholder{color:rgba(230,238,246,0.45)}
.join-card input#joinName:focus{box-shadow:0 14px 48px rgba(31,182,255,0.12);border-color:rgba(31,182,255,0.95)}
.controls .btn-primary{display:inline-flex;align-items:center;gap:12px;padding:14px 18px;border-radius:14px;background:linear-gradient(90deg,var(--accent),#2fb0ff);box-shadow:0 16px 48px rgba(31,182,255,0.08);color:white;font-weight:700;letter-spacing:0.2px}
.controls .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px 14px;border-radius:12px;color:var(--muted)}
.controls .btn-primary .btn-label{display:inline-block}
.controls .btn-primary .spinner{margin-left:6px}

/* Mobile: buttons stacked */
@media (max-width:520px){
    .form-row{flex-direction:column;align-items:stretch}
    .controls{width:100%;display:flex;gap:8px}
    .controls .btn{flex:1}
}

/* New join page layout */
.join-root{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:40px}
.join-container{width:100%;max-width:1200px}
.join-header{display:flex;flex-direction:column;gap:8px;margin-bottom:18px}
.logo{display:flex;align-items:center;gap:10px}
.logo i{font-size:1.6rem;color:var(--accent)}
.logo-text{font-weight:700;font-size:1.1rem}
.lead{margin:0;color:var(--muted)}
.join-grid{display:grid;grid-template-columns:360px 1fr;gap:28px;align-items:start}
.join-side{display:flex;flex-direction:column;gap:12px}
.side-visual{border-radius:14px;overflow:hidden}
.side-note{max-width:320px}
.card-head{display:flex;gap:14px;align-items:center;margin-bottom:12px}
.card-foot{margin-top:12px}

@media (max-width:980px){
    .join-grid{grid-template-columns:1fr;}
    .join-side{order:2}
    .join-card{order:1}
}


/* Light mode override */
body.light{background:linear-gradient(180deg,#f6fbff,#e7f6ff);color:#0b1320}
body.light .chat__section{background:linear-gradient(180deg,#fff,#f7fbff);box-shadow:0 8px 28px rgba(10,20,40,0.06)}
body.light .message.other{background:#f1f7ff;color:#08233a}
body.light .message.me{background:linear-gradient(180deg,#e6f4ff,#cfefff);color:#08233a}
body.light .btn-ghost{color:#334155}

