:root{
    --bg: #0f1724;
    --panel: #0b1220;
    --muted: #9aa4b2;
    --accent: #1fb6ff;
    --success: #3fc37a;
    --danger: #ff6b6b;
    --warning: #ffb020;
    --glass: rgba(255,255,255,0.03);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    background: radial-gradient(800px 400px at 10% 10%, rgba(31,182,255,0.06), transparent 60%), linear-gradient(180deg,#07101a 0%, #061523 100%);
    display:flex;align-items:center;justify-content:center;padding:20px;color:#e6eef6;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

.chat__section{
    width:100%;max-width:1100px;height:86vh;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;padding:18px;display:flex;flex-direction:column;
    box-shadow:0 10px 30px rgba(2,6,23,0.6);gap:12px;
    /* Reduced backdrop-filter for performance */
    backdrop-filter: blur(3px);
}

.chat__header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
.brand{display:flex;align-items:center;gap:12px}
.brand i{font-size:1.6rem;color:var(--accent)}
.brand h1{margin:0;font-size:1.2rem;letter-spacing:0.6px}

.header__controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

/* Connection Status Indicator */
.connection-status{
    display:flex;align-items:center;gap:6px;
    font-size:0.85rem;padding:6px 12px;border-radius:8px;
    background:rgba(255,255,255,0.02);
    border:1px solid rgba(255,255,255,0.04);
    transition:all 0.3s ease;
}
.connection-status i{font-size:0.6rem}
.connection-status.online{color:var(--success);border-color:rgba(63,195,122,0.3)}
.connection-status.online i{color:var(--success);animation:pulse 2s ease-in-out infinite}
.connection-status.offline{color:var(--danger);border-color:rgba(255,107,107,0.3)}

@keyframes pulse{
    0%, 100%{opacity:1}
    50%{opacity:0.4}
}

.btn{border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;transition:all .16s ease}
.btn:disabled{opacity:0.45;cursor:not-allowed}
.btn i{margin-right:6px}
.btn-ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:10px}
.btn-ghost:hover:not(:disabled){background:rgba(255,255,255,0.04)}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:hover:not(:disabled){background:#2fb0ff;transform:translateY(-1px);box-shadow:0 4px 12px rgba(31,182,255,0.3)}
.btn-secondary{background:#0f2540;color:#dff5ff}
.btn-secondary:hover:not(:disabled){background:#153a60}
.btn-danger{background:var(--danger);color:#fff}
.btn-danger:hover:not(:disabled){background:#ff5252}

.message_area{
    flex:1;overflow:auto;padding:18px;border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02)); 
    scroll-behavior: smooth;
    /* Performance optimization */
    contain: layout style paint;
    will-change: scroll-position;
}

.messages{display:flex;flex-direction:column;gap:8px;}

/* Message Grouping with containment for performance */
.message-group{
    display:flex;flex-direction:column;gap:4px;margin-bottom:12px;
    /* CSS containment for better rendering performance */
    contain: layout style paint;
}
.message-group.me{align-items:flex-end;}
.message-group.other{align-items:flex-start;}
.message-group .meta{
    display:flex;gap:8px;align-items:center;
    font-size:0.8rem;color:var(--muted);margin:0 0 4px 0;
}
.message-group.me .meta{justify-content:flex-end;}

.message{
    max-width:78%;border-radius:12px;padding:8px 12px;
    word-break:break-word;white-space:pre-wrap;
    box-shadow:0 2px 8px rgba(2,6,23,0.2);
    position:relative;
    /* Optimize paint performance */
    transform:translateZ(0);
}
.message.me{
    /* Solid color instead of gradient for performance */
    background:#06527f;color:#fff;border-bottom-right-radius:6px;
}
.message.other{
    background:#0f1b2a;color:#e6eef6;border-bottom-left-radius:6px;
}
.message p{margin:0;line-height:1.35;}

/* Message Status Indicators */
.message-status{
    position:absolute;bottom:6px;right:8px;
    font-size:0.75rem;opacity:0.6;
}
.message[data-status="sending"] .message-status{
    color:var(--warning);
    animation:fadeInOut 1.5s ease-in-out infinite;
}
.message[data-status="failed"] .message-status{
    color:var(--danger);
}
.message[data-status="sent"] .message-status{
    color:var(--success);
}

@keyframes fadeInOut{
    0%, 100%{opacity:0.4}
    50%{opacity:1}
}

.input_area{display:flex;gap:10px;align-items:flex-end;padding:8px}
#message_Area{
    flex:1;padding:12px;border-radius:14px;
    border:1px solid rgba(255,255,255,0.04);
    background:rgba(255,255,255,0.02);color:inherit;
    resize:none;min-height:44px;max-height:120px;
    font-family:inherit;line-height:1.4;
    transition:border-color 0.2s ease, box-shadow 0.2s ease;
}
#message_Area:focus{
    outline:none;
    border-color:rgba(31,182,255,0.4);
    box-shadow:0 0 0 3px rgba(31,182,255,0.1);
}
.send_btn{
    width:48px;height:48px;border-radius:12px;
    background:var(--accent);color:#fff;border:0;
    display:grid;place-items:center;cursor:pointer;
    transition:all 0.2s ease;flex-shrink:0;
}
.send_btn:hover:not(:disabled){
    background:#2fb0ff;transform:scale(1.05);
}
.send_btn:disabled{opacity:0.4;cursor:not-allowed}

/* Typing indicator with animation */
.typing-indicator-container{
    min-height:24px;color:var(--muted);
    font-size:0.85rem;padding: 0 18px 4px;
    opacity:1;transition:opacity 0.2s ease-out;
}
.typing-indicator-container.hidden{
    opacity:0;pointer-events:none;
}
.typing-indicator-container .dots{
    display:inline-block;animation:typing 1.4s ease-in-out infinite;
}
@keyframes typing{
    0%, 60%, 100%{opacity:1}
    30%{opacity:0.3}
}

/* Modal */
.modal{
    position:fixed;inset:0;display:grid;place-items:center;
    background:rgba(2,6,23,0.8);z-index:60;
    backdrop-filter:blur(4px);
}
.modal.hidden{display:none}
.modal__content{
    background:var(--panel);padding:24px;border-radius:12px;
    min-width:320px;max-width:420px;color:#e6eef6;
    box-shadow:0 8px 30px rgba(2,6,23,0.6);
    animation:modalIn 0.2s ease-out;
}
@keyframes modalIn{
    from{opacity:0;transform:scale(0.95)}
    to{opacity:1;transform:scale(1)}
}
.modal__content h3{margin:0 0 16px 0}
.modal__content input{
    width:100%;padding:12px;border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);margin-bottom:12px;
    background:rgba(255,255,255,0.02);color:inherit;
    font-size:1rem;transition:all 0.2s ease;
}
.modal__content input:focus{
    outline:none;border-color:rgba(31,182,255,0.4);
    box-shadow:0 0 0 3px rgba(31,182,255,0.1);
}
.modal__actions{display:flex;gap:8px;justify-content:flex-end}

/* Spinner */
.spinner{
    display:inline-block;width:16px;height:16px;border-radius:50%;
    border:2px solid rgba(255,255,255,0.12);border-top-color:var(--accent);
    transform:translateY(1px);opacity:0;transition:opacity .12s linear;
}
.btn.loading .spinner{opacity:1;animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Toasts */
.toasts{
    position:fixed;right:18px;bottom:18px;
    display:flex;flex-direction:column;gap:8px;z-index:80;
}
.toast{
    min-width:220px;background:rgba(0,0,0,0.7);color:#fff;
    padding:12px 16px;border-radius:10px;
    backdrop-filter:blur(8px);
    box-shadow:0 6px 20px rgba(2,6,23,0.5);
    display:flex;align-items:center;gap:10px;
    transition:all 0.3s ease;
    animation:toastIn 0.3s ease-out;
}
@keyframes toastIn{
    from{opacity:0;transform:translateX(20px)}
    to{opacity:1;transform:translateX(0)}
}
.toast.success{border-left:4px solid var(--success)}
.toast.warn{border-left:4px solid var(--warning)}
.toast.error{border-left:4px solid var(--danger)}

/* Reply button */
.message .btn-reply{
    background:transparent;border:none;
    color:var(--muted);font-size:0.9rem;
    padding:4px 8px;border-radius:6px;
    cursor:pointer;opacity:0;
    transition:opacity 0.2s ease-in-out;
    margin-left:8px;position:absolute;
    top:4px;right:4px;
}
.message:hover .btn-reply{opacity:1}
.message:focus-within .btn-reply{opacity:1}
.message.me .btn-reply{color:rgba(255,255,255,0.6)}
.message.other .btn-reply{color:rgba(230,238,246,0.6)}
.btn-reply:hover{background:rgba(255,255,255,0.1)}

.reply-to{
    font-size:0.75rem;color:var(--muted);
    margin-bottom:6px;padding-left:8px;
    border-left:2px solid var(--accent);opacity:0.8;
}

/* Mobile optimizations */
@media (max-width:720px){
    body{padding:0}
    .chat__section{
        height:100dvh;/* Dynamic viewport height for mobile */
        border-radius:0;padding:12px;max-height:100dvh;
    }
    .message{max-width:85%}
    .header__controls{gap:6px}
    .btn{
        min-height:44px;/* Touch target size */
        min-width:44px;padding:8px 10px;
    }
    .message .btn-reply{opacity:1;/* Always visible on mobile */}
    .connection-status{font-size:0.75rem;padding:4px 8px}
}

/* Join form specific - Enhanced with modern UI/UX */
.join-card{
    width:100%;display:flex;flex-direction:column;gap:20px;
    padding:32px;border-radius:16px;
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    box-shadow:0 8px 32px rgba(2,6,23,0.4);
    border:1px solid rgba(255,255,255,0.06);
    transition:box-shadow 0.3s ease;
}
.join-card:hover{
    box-shadow:0 12px 48px rgba(2,6,23,0.5);
}
.join-card input{
    padding:16px 18px;border-radius:12px;
    border:2px solid rgba(255,255,255,0.08);
    background:rgba(255,255,255,0.03);color:inherit;
    font-size:1rem;outline:none;
    transition:all 0.2s ease;
    font-family:inherit;
}
.join-card input:hover:not(:focus){
    border-color:rgba(255,255,255,0.12);
    background:rgba(255,255,255,0.04);
}
.join-card input:focus{
    border-color:rgba(31,182,255,0.6);
    box-shadow:0 0 0 4px rgba(31,182,255,0.12);
    background:rgba(255,255,255,0.05);
}
.join-card input::placeholder{
    color:rgba(230,238,246,0.4);
    transition:color 0.2s ease;
}
.join-card input:focus::placeholder{
    color:rgba(230,238,246,0.5);
}
/* Enhanced label styling */
.join-card label{
    display:block;font-size:0.9rem;
    font-weight:600;color:var(--muted);
    margin-bottom:8px;letter-spacing:0.3px;
}
/* Form field wrapper */
.form-field{
    display:flex;flex-direction:column;gap:8px;
    position:relative;
}
.form-field.has-error input{
    border-color:var(--danger);
    background:rgba(255,107,107,0.05);
}
.form-field.has-success input{
    border-color:var(--success);
}
/* Input icons */
.input-icon{
    position:absolute;right:16px;top:50%;
    transform:translateY(-50%);
    color:var(--muted);font-size:1.1rem;
    pointer-events:none;transition:color 0.2s ease;
}
.form-field:focus-within .input-icon{
    color:var(--accent);
}
/* Character counter */
.char-counter{
    font-size:0.8rem;color:var(--muted);
    text-align:right;margin-top:4px;
}
.char-counter.warning{color:var(--warning)}
.char-counter.danger{color:var(--danger)}
.fade-in{animation:fadeIn .36s ease-out both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* Join page layout */
.join-page{
    display:grid;grid-template-columns:1fr 420px;gap:28px;
    min-height:80vh;padding:36px;align-items:center;
}
.join-hero{padding:28px}
.join-hero .brand{display:flex;flex-direction:column;gap:8px}
.join-hero .brand i{font-size:2.6rem;color:var(--accent)}
.muted{color:var(--muted)}
.hero-illus{
    height:220px;
    background:linear-gradient(135deg, rgba(74,144,226,0.12), rgba(63,195,122,0.08));
    border-radius:14px;
}
.join-card h2{margin:0;font-size:1.2rem}
.join-card .small{font-size:0.85rem}

.avatar-preview{
    width:88px;height:88px;border-radius:20px;
    background:linear-gradient(135deg,#063a66,#0271a6);
    display:grid;place-items:center;color:#fff;
    font-weight:800;font-size:1.5rem;
    box-shadow:0 12px 32px rgba(3,12,28,0.4), 0 0 0 4px rgba(31,182,255,0.1);
    transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position:relative;overflow:hidden;
}
.avatar-preview::before{
    content:'';position:absolute;inset:0;
    background:linear-gradient(135deg,rgba(255,255,255,0.15),transparent);
    opacity:0;transition:opacity 0.3s ease;
}
.avatar-preview:hover::before{opacity:1}
.avatar-preview.has-content{
    animation:avatarPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}
@keyframes avatarPop{
    0%{transform:scale(0.8);opacity:0}
    50%{transform:scale(1.1)}
    100%{transform:scale(1);opacity:1}
}

.form-row{
    display:flex;justify-content:space-between;
    align-items:center;gap:16px;margin-top:20px;
}
.form-row .controls{display:flex;gap:12px;flex:1}
.form-row .actions{display:flex;gap:12px}
.error{
    color:var(--danger);min-height:24px;font-size:0.9rem;
    font-weight:500;display:flex;align-items:center;gap:8px;
    padding:8px 12px;border-radius:8px;
    background:rgba(255,107,107,0.1);
    border-left:3px solid var(--danger);
    animation:errorShake 0.4s ease;
}
.error:empty{display:none}
.error i{font-size:1rem}
@keyframes errorShake{
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-8px)}
    75%{transform:translateX(8px)}
}
/* Success state */
.success-message{
    color:var(--success);font-size:0.9rem;
    font-weight:500;display:flex;align-items:center;gap:8px;
    padding:10px 14px;border-radius:8px;
    background:rgba(63,195,122,0.1);
    border-left:3px solid var(--success);
    animation:slideIn 0.3s ease;
}
@keyframes slideIn{
    from{opacity:0;transform:translateY(-10px)}
    to{opacity:1;transform:translateY(0)}
}

.sr-only{
    position:absolute;width:1px;height:1px;
    padding:0;margin:-1px;overflow:hidden;
    clip:rect(0,0,0,0);white-space:nowrap;border:0;
}

/* Polished join card with enhanced visual hierarchy */
.join-card{
    max-width:540px;margin:0 auto;padding:40px;
    border-radius:20px;
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    box-shadow:0 20px 60px rgba(2,6,23,0.5), 0 0 0 1px rgba(255,255,255,0.06);
    transition:all 0.3s ease;
}
.join-card:hover{
    transform:translateY(-2px);
    box-shadow:0 24px 72px rgba(2,6,23,0.6), 0 0 0 1px rgba(255,255,255,0.08);
}
.join-card h2{
    margin:0 0 8px 0;font-size:1.5rem;
    font-weight:700;letter-spacing:-0.02em;
}
.join-card .small{
    font-size:0.9rem;line-height:1.5;
    color:var(--muted);margin-bottom:8px;
}
.join-card input#joinName{
    width:100%;padding:18px 20px;border-radius:14px;
    border:2px solid rgba(255,255,255,0.08);
    background:rgba(255,255,255,0.03);
    color:inherit;font-size:1.1rem;outline:none;
    transition:all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight:500;
}
.join-card input#joinName:hover:not(:focus){
    border-color:rgba(255,255,255,0.14);
    background:rgba(255,255,255,0.05);
    transform:translateY(-1px);
}
.join-card input#joinName::placeholder{
    color:rgba(230,238,246,0.35);
    font-weight:400;
}
.join-card input#joinName:focus{
    box-shadow:0 0 0 4px rgba(31,182,255,0.15), 0 8px 24px rgba(31,182,255,0.08);
    border-color:rgba(31,182,255,0.7);
    background:rgba(255,255,255,0.06);
    transform:translateY(-1px);
}
/* Floating label effect */
.form-field-wrapper{
    position:relative;margin-bottom:24px;
}
.floating-label{
    position:absolute;left:20px;top:50%;
    transform:translateY(-50%);
    color:var(--muted);font-size:1.1rem;
    pointer-events:none;
    transition:all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    background:transparent;padding:0 4px;
    font-weight:400;
}
.form-field-wrapper input:focus ~ .floating-label,
.form-field-wrapper input:not(:placeholder-shown) ~ .floating-label{
    top:0;font-size:0.85rem;
    color:var(--accent);font-weight:600;
    background:var(--panel);
}
/* Enhanced button styling */
.controls{display:flex;gap:12px;align-items:stretch}
.controls .btn-primary{
    display:inline-flex;align-items:center;justify-content:center;
    gap:10px;padding:16px 28px;border-radius:14px;
    background:linear-gradient(135deg,#1fb6ff 0%,#2fb0ff 100%);
    box-shadow:0 8px 24px rgba(31,182,255,0.25);
    color:white;font-weight:700;letter-spacing:0.3px;
    transition:all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    position:relative;overflow:hidden;
    border:none;cursor:pointer;
}
.controls .btn-primary::before{
    content:'';position:absolute;inset:0;
    background:linear-gradient(135deg,rgba(255,255,255,0.2),transparent);
    opacity:0;transition:opacity 0.25s ease;
}
.controls .btn-primary:hover::before{opacity:1}
.controls .btn-primary:hover:not(:disabled){
    transform:translateY(-2px);
    box-shadow:0 12px 32px rgba(31,182,255,0.35);
}
.controls .btn-primary:active:not(:disabled){
    transform:translateY(0);
    box-shadow:0 4px 16px rgba(31,182,255,0.3);
}
.controls .btn-primary:disabled{
    opacity:0.5;cursor:not-allowed;
    transform:none !important;
}
.controls .btn-ghost{
    background:transparent;
    border:2px solid rgba(255,255,255,0.08);
    padding:14px 20px;border-radius:14px;
    color:var(--muted);font-weight:600;
    transition:all 0.2s ease;
}
.controls .btn-ghost:hover:not(:disabled){
    border-color:rgba(255,255,255,0.16);
    background:rgba(255,255,255,0.04);
    color:#e6eef6;
}
.controls .btn-primary .btn-label{display:inline-block}
.controls .btn-primary .spinner{margin-left:4px}

/* Mobile: buttons stacked */
@media (max-width:520px){
    .form-row{flex-direction:column;align-items:stretch}
    .controls{width:100%;display:flex;gap:8px}
    .controls .btn{flex:1}
}

/* New join page layout */
.join-root{
    display:flex;align-items:center;justify-content:center;
    min-height:100vh;padding:40px;
}
.join-container{width:100%;max-width:1200px}
.join-header{display:flex;flex-direction:column;gap:8px;margin-bottom:18px}
.logo{display:flex;align-items:center;gap:10px}
.logo i{font-size:1.6rem;color:var(--accent)}
.logo-text{font-weight:700;font-size:1.1rem}
.lead{margin:0;color:var(--muted)}
.join-grid{display:grid;grid-template-columns:360px 1fr;gap:28px;align-items:start}
.join-side{display:flex;flex-direction:column;gap:12px}
.side-visual{border-radius:14px;overflow:hidden}
.side-note{max-width:320px}
.card-head{display:flex;gap:14px;align-items:center;margin-bottom:12px}
.card-foot{margin-top:12px}

@media (max-width:980px){
    .join-grid{grid-template-columns:1fr}
    .join-side{order:2}
    .join-card{order:1}
    .join-page{grid-template-columns:1fr;min-height:unset;padding:20px}
    .hero-illus{display:none}
}

/* Light mode override */
body.light{
    background:linear-gradient(180deg,#f6fbff,#e7f6ff);
    color:#0b1320;
}
body.light .chat__section{
    background:linear-gradient(180deg,#fff,#f7fbff);
    box-shadow:0 8px 28px rgba(10,20,40,0.06);
    border:1px solid rgba(0,0,0,0.06);
}
body.light .message.other{background:#f1f7ff;color:#08233a}
body.light .message.me{background:#cfefff;color:#08233a}
body.light .btn-ghost{color:#334155;border-color:rgba(0,0,0,0.12)}
body.light .btn-ghost:hover{background:rgba(0,0,0,0.04);border-color:rgba(0,0,0,0.2)}
body.light .connection-status{
    border-color:rgba(0,0,0,0.12);
    background:rgba(255,255,255,0.6);
}
body.light #message_Area{
    background:#ffffff;
    border:2px solid rgba(0,0,0,0.12);
    color:#0b1320;
}
body.light #message_Area::placeholder{color:rgba(11,19,32,0.45)}
body.light #message_Area:focus{
    border-color:#1fb6ff;
    box-shadow:0 0 0 3px rgba(31,182,255,0.15);
    background:#ffffff;
}
body.light .message_area{
    background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.03));
    border:1px solid rgba(0,0,0,0.08);
}
body.light .typing-indicator-container{color:#64748b}
body.light .modal{background:rgba(255,255,255,0.85)}
body.light .modal__content{
    background:#ffffff;
    box-shadow:0 20px 60px rgba(0,0,0,0.15);
    border:1px solid rgba(0,0,0,0.08);
}
body.light .modal__content input{
    background:#ffffff;
    border:2px solid rgba(0,0,0,0.12);
    color:#0b1320;
}
body.light .modal__content input::placeholder{color:rgba(11,19,32,0.45)}
body.light .modal__content input:focus{
    border-color:#1fb6ff;
    box-shadow:0 0 0 3px rgba(31,182,255,0.15);
    background:#ffffff;
}
body.light .join-card{
    background:#ffffff;
    box-shadow:0 12px 40px rgba(0,0,0,0.12);
    border:1px solid rgba(0,0,0,0.08);
}
body.light .join-card input#joinName{
    background:#ffffff;
    border:2px solid rgba(0,0,0,0.12);
    color:#0b1320;
    transition:all 0.2s ease;
}
body.light .join-card input#joinName::placeholder{color:rgba(11,19,32,0.4)}
body.light .join-card input#joinName:focus{
    border-color:#1fb6ff;
    box-shadow:0 0 0 4px rgba(31,182,255,0.15);
    background:#ffffff;
}
body.light .join-card input#joinName:hover:not(:focus){
    border-color:rgba(0,0,0,0.2);
}
body.light .error{color:#dc2626}
body.light .muted{color:#64748b}
body.light .avatar-preview{
    background:linear-gradient(135deg,#1fb6ff,#0ea5e9);
    box-shadow:0 8px 24px rgba(31,182,255,0.3);
}
body.light .card-foot{color:#64748b}
body.light .send_btn:disabled{opacity:0.5}
body.light .btn-primary{
    background:linear-gradient(90deg,#1fb6ff,#0ea5e9);
    color:#ffffff;
    box-shadow:0 4px 12px rgba(31,182,255,0.25);
}
body.light .btn-primary:hover:not(:disabled){
    box-shadow:0 6px 20px rgba(31,182,255,0.35);
    transform:translateY(-1px);
}
body.light .btn-secondary{
    background:#f1f5f9;
    color:#334155;
    border:1px solid rgba(0,0,0,0.12);
}
body.light .btn-secondary:hover:not(:disabled){
    background:#e2e8f0;
    border-color:rgba(0,0,0,0.2);
}
body.light .btn-danger{
    background:#dc2626;
    color:#ffffff;
}
body.light .toast{
    background:rgba(255,255,255,0.95);
    color:#0b1320;
    box-shadow:0 8px 24px rgba(0,0,0,0.15);
    border:1px solid rgba(0,0,0,0.08);
}
body.light .reply-to{
    color:#64748b;
    border-left-color:#1fb6ff;
}

/* Scrollbar styling */
.message_area::-webkit-scrollbar{width:8px}
.message_area::-webkit-scrollbar-track{background:rgba(255,255,255,0.02)}
.message_area::-webkit-scrollbar-thumb{
    background:rgba(255,255,255,0.1);
    border-radius:4px;
}
.message_area::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.15)}

body.light .message_area::-webkit-scrollbar-track{background:rgba(0,0,0,0.02)}
body.light .message_area::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1)}
body.light .message_area::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.15)}

/* Focus visible for accessibility */
*:focus-visible{
    outline:2px solid var(--accent);
    outline-offset:2px;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce){
    *,*::before,*::after{
        animation-duration:0.01ms !important;
        animation-iteration-count:1 !important;
        transition-duration:0.01ms !important;
    }
}